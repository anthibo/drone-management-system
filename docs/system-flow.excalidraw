{"type":"excalidraw","version":2,"source":"https://excalidraw.com","elements":[{"type":"rectangle","version":1,"versionNonce":1,"isDeleted":false,"id":"auth","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":80,"y":60,"strokeColor":"#1e1e1e","backgroundColor":"#ffffff","width":240,"height":90,"seed":1,"groupIds":[],"roundness":{"type":3},"boundElements":[],"updated":1,"link":null,"locked":false},{"type":"text","version":1,"versionNonce":1,"isDeleted":false,"id":"auth_t","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":105,"y":90,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":200,"height":40,"seed":1,"groupIds":[],"roundness":null,"boundElements":[],"updated":1,"link":null,"locked":false,"text":"Auth: POST /auth/token\n-> JWT (role)","fontSize":16,"fontFamily":1,"textAlign":"left","verticalAlign":"top","baseline":34},{"type":"rectangle","version":1,"versionNonce":1,"isDeleted":false,"id":"enduser","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":60,"y":200,"strokeColor":"#1e1e1e","backgroundColor":"#e3f2fd","width":280,"height":140,"seed":1,"groupIds":[],"roundness":{"type":3},"boundElements":[],"updated":1,"link":null,"locked":false},{"type":"text","version":1,"versionNonce":1,"isDeleted":false,"id":"enduser_t","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":80,"y":225,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":245,"height":90,"seed":1,"groupIds":[],"roundness":null,"boundElements":[],"updated":1,"link":null,"locked":false,"text":"Enduser\n- POST /orders (create)\n- POST /orders/{id}/withdraw\n- GET /orders/{id} (view+ETA)","fontSize":16,"fontFamily":1,"textAlign":"left","verticalAlign":"top","baseline":84},{"type":"rectangle","version":1,"versionNonce":1,"isDeleted":false,"id":"drone","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":420,"y":200,"strokeColor":"#1e1e1e","backgroundColor":"#e8f5e9","width":300,"height":180,"seed":1,"groupIds":[],"roundness":{"type":3},"boundElements":[],"updated":1,"link":null,"locked":false},{"type":"text","version":1,"versionNonce":1,"isDeleted":false,"id":"drone_t","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":440,"y":225,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":270,"height":140,"seed":1,"groupIds":[],"roundness":null,"boundElements":[],"updated":1,"link":null,"locked":false,"text":"Drone\n- POST /drone/jobs/reserve\n- POST /drone/orders/{id}/pickup\n- POST /drone/orders/{id}/deliver|fail\n- POST /drone/broken (handoff)\n- POST /drone/heartbeat (loc+status)\n- GET /drone/orders/current","fontSize":16,"fontFamily":1,"textAlign":"left","verticalAlign":"top","baseline":134},{"type":"rectangle","version":1,"versionNonce":1,"isDeleted":false,"id":"admin","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":780,"y":200,"strokeColor":"#1e1e1e","backgroundColor":"#fff3e0","width":280,"height":160,"seed":1,"groupIds":[],"roundness":{"type":3},"boundElements":[],"updated":1,"link":null,"locked":false},{"type":"text","version":1,"versionNonce":1,"isDeleted":false,"id":"admin_t","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":800,"y":225,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":250,"height":120,"seed":1,"groupIds":[],"roundness":null,"boundElements":[],"updated":1,"link":null,"locked":false,"text":"Admin\n- GET /admin/orders (bulk)\n- PATCH /admin/orders/{id}\n- GET /admin/drones\n- POST /admin/drones/{id}/broken|fixed","fontSize":16,"fontFamily":1,"textAlign":"left","verticalAlign":"top","baseline":114},{"type":"rectangle","version":1,"versionNonce":1,"isDeleted":false,"id":"svc","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":380,"y":430,"strokeColor":"#1e1e1e","backgroundColor":"#ffffff","width":360,"height":110,"seed":1,"groupIds":[],"roundness":{"type":3},"boundElements":[],"updated":1,"link":null,"locked":false},{"type":"text","version":1,"versionNonce":1,"isDeleted":false,"id":"svc_t","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":400,"y":455,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":330,"height":60,"seed":1,"groupIds":[],"roundness":null,"boundElements":[],"updated":1,"link":null,"locked":false,"text":"Go Service Layer\n(shared across REST/gRPC/Thrift)\nOrder + Drone state machine + ETA","fontSize":16,"fontFamily":1,"textAlign":"left","verticalAlign":"top","baseline":54},{"type":"rectangle","version":1,"versionNonce":1,"isDeleted":false,"id":"db","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":380,"y":590,"strokeColor":"#1e1e1e","backgroundColor":"#f5f5f5","width":170,"height":90,"seed":1,"groupIds":[],"roundness":{"type":3},"boundElements":[],"updated":1,"link":null,"locked":false},{"type":"text","version":1,"versionNonce":1,"isDeleted":false,"id":"db_t","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":405,"y":620,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":120,"height":40,"seed":1,"groupIds":[],"roundness":null,"boundElements":[],"updated":1,"link":null,"locked":false,"text":"Postgres\norders+drones\noutbox events","fontSize":16,"fontFamily":1,"textAlign":"left","verticalAlign":"top","baseline":34},{"type":"rectangle","version":1,"versionNonce":1,"isDeleted":false,"id":"nats","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":590,"y":590,"strokeColor":"#1e1e1e","backgroundColor":"#f5f5f5","width":150,"height":90,"seed":1,"groupIds":[],"roundness":{"type":3},"boundElements":[],"updated":1,"link":null,"locked":false},{"type":"text","version":1,"versionNonce":1,"isDeleted":false,"id":"nats_t","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":620,"y":620,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":90,"height":40,"seed":1,"groupIds":[],"roundness":null,"boundElements":[],"updated":1,"link":null,"locked":false,"text":"NATS\n(drone.events)","fontSize":16,"fontFamily":1,"textAlign":"left","verticalAlign":"top","baseline":34},{"type":"arrow","version":1,"versionNonce":1,"isDeleted":false,"id":"a1","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":320,"y":105,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":120,"height":110,"seed":1,"groupIds":[],"roundness":null,"boundElements":[],"updated":1,"link":null,"locked":false,"points":[[0,0],[120,110]],"lastCommittedPoint":null,"startBinding":null,"endBinding":null},{"type":"arrow","version":1,"versionNonce":1,"isDeleted":false,"id":"a2","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":320,"y":105,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":250,"height":110,"seed":1,"groupIds":[],"roundness":null,"boundElements":[],"updated":1,"link":null,"locked":false,"points":[[0,0],[250,110]],"lastCommittedPoint":null,"startBinding":null,"endBinding":null},{"type":"arrow","version":1,"versionNonce":1,"isDeleted":false,"id":"a3","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":320,"y":105,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":520,"height":110,"seed":1,"groupIds":[],"roundness":null,"boundElements":[],"updated":1,"link":null,"locked":false,"points":[[0,0],[520,110]],"lastCommittedPoint":null,"startBinding":null,"endBinding":null},{"type":"arrow","version":1,"versionNonce":1,"isDeleted":false,"id":"b1","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":200,"y":340,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":250,"height":90,"seed":1,"groupIds":[],"roundness":null,"boundElements":[],"updated":1,"link":null,"locked":false,"points":[[0,0],[250,90]],"lastCommittedPoint":null,"startBinding":null,"endBinding":null},{"type":"arrow","version":1,"versionNonce":1,"isDeleted":false,"id":"b2","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":560,"y":380,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":20,"height":50,"seed":1,"groupIds":[],"roundness":null,"boundElements":[],"updated":1,"link":null,"locked":false,"points":[[0,0],[20,50]],"lastCommittedPoint":null,"startBinding":null,"endBinding":null},{"type":"arrow","version":1,"versionNonce":1,"isDeleted":false,"id":"b3","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":900,"y":360,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":-260,"height":70,"seed":1,"groupIds":[],"roundness":null,"boundElements":[],"updated":1,"link":null,"locked":false,"points":[[0,0],[-260,70]],"lastCommittedPoint":null,"startBinding":null,"endBinding":null},{"type":"arrow","version":1,"versionNonce":1,"isDeleted":false,"id":"c1","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":560,"y":540,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":-90,"height":50,"seed":1,"groupIds":[],"roundness":null,"boundElements":[],"updated":1,"link":null,"locked":false,"points":[[0,0],[-90,50]],"lastCommittedPoint":null,"startBinding":null,"endBinding":null},{"type":"arrow","version":1,"versionNonce":1,"isDeleted":false,"id":"c2","fillStyle":"hachure","strokeWidth":1,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":600,"y":540,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":70,"height":50,"seed":1,"groupIds":[],"roundness":null,"boundElements":[],"updated":1,"link":null,"locked":false,"points":[[0,0],[70,50]],"lastCommittedPoint":null,"startBinding":null,"endBinding":null}],"appState":{"viewBackgroundColor":"#ffffff"},"files":{}}